import{_ as X}from"./Bxrf48Gc.js";import{_ as Y}from"./C8PGidC5.js";import{_ as N}from"./UFDYvW95.js";import J from"./CxiRr9we.js";import M from"./CmySksWD.js";import{e as B,l as _,o as s,w as m,a as i,b as n,u as l,d as Z,c as g,n as F,m as x,r as b,J as K,K as V,F as w,f as G,G as ee,M as L,s as le,k as oe,N as k,O as te}from"./EKjwmu4X.js";import{_ as E}from"./C8QJTnKX.js";import ae from"./WA78xVwC.js";import se from"./795X7oyD.js";import re from"./DWbfJTPH.js";import"./B9gn4CE_.js";import{h as ne}from"./88yLcmfY.js";import{g as I}from"./8G3UIhLy.js";import{u as ie}from"./DJVjK9Hs.js";import ue from"./CYeOsY5C.js";import H from"./DjTHL9Br.js";const ce={class:"flex flex-col w-full lg:w-3/4"},de=B({__name:"MembersForm",setup(h){return(e,a)=>(s(),_(N,{label:"Ajouter un membre"},{default:m(()=>[i("div",ce,[n(l(J),{placeholder:"Pseudo/mail",class:"w-full"}),n(l(M),{variant:"outlined",size:"small",class:"mt-2 ml-auto"},{default:m(()=>a[0]||(a[0]=[i("i",{class:"pi pi-inbox"},null,-1),Z(" Envoyer la demande ")])),_:1,__:[0]})])]),_:1}))}}),P=B({__name:"ChoiceColor",props:{color:{},selected:{type:Boolean}},setup(h){return(e,a)=>(s(),g("div",{class:F(["h-12 rounded-sm flex justify-center items-center transition",[`bg-${e.color}-200 hover:bg-${e.color}-300`]])},[e.selected?(s(),g("i",{key:0,class:F(["pi pi-check",[`text-${e.color}-600`]]),style:{"font-weight":"bold"}},null,2)):x("",!0)],2))}}),pe={class:"grid grid-cols-5 md:grid-cols-6 gap-4"},me={class:"flex justify-end"},fe=B({__name:"CategoryForm",props:{category:{},onSaveCategory:{type:Function},mode:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(h,{emit:e}){const a=h,d=e,p=b({label:"",color:"gray"}),u=b(null);K(()=>a.modelValue,f=>{if(f){p.value=a.category?{...a.category}:{label:"",color:"gray"};const c=V.options.filter(C=>C!=="gray");u.value=a.category?c.indexOf(a.category.color):null}});const S=()=>{if(!p.value.label||u.value===null)return;const f={label:p.value.label,color:V.options.filter(c=>c!=="gray")[u.value]};a.onSaveCategory(f),d("update:modelValue",!1)};return(f,c)=>{const C=P;return s(),_(l(ae),{visible:f.modelValue,modal:"",header:f.mode==="edit"?"Modifier la catégorie":"Créer une catégorie",style:{width:"25rem"},"onUpdate:visible":c[1]||(c[1]=v=>d("update:modelValue",v))},{default:m(()=>[n(l(se),{variant:"on",class:"mt-1"},{default:m(()=>[n(l(J),{id:"label",modelValue:p.value.label,"onUpdate:modelValue":c[0]||(c[0]=v=>p.value.label=v)},null,8,["modelValue"]),c[2]||(c[2]=i("label",{for:"label"},"Nom",-1))]),_:1,__:[2]}),n(N,{label:"Choisir la couleur",class:"my-6"},{default:m(()=>[i("div",pe,[(s(!0),g(w,null,G(l(V).options.filter(v=>v!=="gray"),(v,o)=>(s(),_(C,{key:o,color:v,selected:u.value===o,onClick:t=>u.value=o},null,8,["color","selected","onClick"]))),128))])]),_:1}),i("div",me,[n(l(M),{label:f.mode==="edit"?"Sauvegarder":"Ajouter",onClick:S},null,8,["label"])])]),_:1},8,["visible","header"])}}}),ve=[{label:"Abonnement",color:"red"},{label:"Course",color:"blue"},{label:"Famille",color:"green"},{label:"Santé",color:"orange"}],_e={class:"flex gap-1.5 flex-wrap"},ge=["onClick"],ye=["onClick"],be={class:"flex gap-1.5 flex-wrap"},Ce=["onClick"],he=B({__name:"CategoriesSelection",props:{modelValue:{default:[]},modelModifiers:{}},emits:["update:modelValue"],setup(h){const e=ee(h,"modelValue"),a=b(void 0),d=b("create"),p=b(!1),u=b(ve),S=({category:o})=>{e.value.push(o);const t=u.value.indexOf(o);u.value.splice(t,1)},f=({category:o})=>{if(!e.value)return;const t=e==null?void 0:e.value.indexOf(o);e==null||e.value.splice(t,1),u.value.push(o)},c=()=>{a.value=void 0,d.value="create",p.value=!0},C=o=>{a.value=o,d.value="edit",p.value=!0},v=o=>{if(e.value)if(d.value==="edit"&&a.value){const t=e==null?void 0:e.value.findIndex(r=>{var y;return r.label===((y=a.value)==null?void 0:y.label)});t!==-1&&(e.value[t]=o)}else{e==null||e.value.push(o);const t=u.value.findIndex(r=>r.label===o.label);t!==-1&&u.value.splice(t,1)}};return(o,t)=>(s(),g(w,null,[e.value.length?(s(),_(N,{key:0,label:"Catégorie sélectionné"},{default:m(()=>[i("div",_e,[(s(!0),g(w,null,G(e.value,(r,y)=>(s(),_(E,{key:y,category:r,add:""},{add:m(()=>[i("i",{class:"pi pi-pencil",onClick:j=>C(r)},null,8,ge),i("i",{class:"pi pi-minus",onClick:j=>f({category:r})},null,8,ye)]),_:2},1032,["category"]))),128))])]),_:1})):x("",!0),n(N,{label:"Ajouter une catégorie"},{default:m(()=>[i("div",be,[(s(!0),g(w,null,G(l(u),(r,y)=>(s(),_(E,{key:y,category:r,add:""},{add:m(()=>[i("i",{class:"pi pi-plus",onClick:j=>S({category:r})},null,8,Ce)]),_:2},1032,["category"]))),128)),n(E,{onClick:c}),n(fe,{modelValue:l(p),"onUpdate:modelValue":t[0]||(t[0]=r=>L(p)?p.value=r:null),category:l(a),mode:l(d),"on-save-category":v},null,8,["modelValue","category","mode"])])]),_:1})],64))}}),$e={class:"flex items-center gap-2"},ke=["for"],xe={class:"flex items-center gap-2"},Ve=["for"],we={class:"grid grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-4"},Se={key:3,class:"flex flex-col gap-3 w-64 self-center"},Me={key:4,class:"flex justify-center"},Le=B({__name:"GroupForm",setup(h){const{group:e}=le(oe()),a=b(null),d=b([]);K(()=>e.value,o=>{var t;o&&(a.value=o.color&&o.color!=="gray"?V.options.filter(r=>r!=="gray").indexOf(o.color):null,d.value=((t=o.categories)==null?void 0:t.filter(r=>r.label!=="default"))??[])},{immediate:!0});const{createGroupMutation:p,editGroupMutation:u,deleteGroupMutation:S}=ie(e),f=o=>{a.value=a.value===o?null:o},c=o=>{if(a.value===null)return;const t={name:o.states.name.value,type:o.states.type.value,color:V.options.filter(r=>r!=="gray")[a.value],categories:d.value};e.value?u.mutate(t):p.mutate(t)},C=()=>{confirm("Es-tu sûr de vouloir supprimer le groupe ?")&&S.mutate()},v=e.value&&e.value?{name:e.value.name??"",type:e.value.type}:{};return(o,t)=>{const r=X,y=Y,j=de,A=N,q=P,Q=he;return s(),g(w,null,[n(r,{label:l(e)?l(e).name:"Nouveau group",color:l(e)?l(e).color:"gray",to:l(e)?`/groups/${l(e).id}`:"/groups"},null,8,["label","color","to"]),n(l(re),{"initial-values":l(v),resolver:l(ne)(l(te)),class:"flex flex-col gap-10",onSubmit:c},{default:m(W=>{var R,T,U,z,D;return[((R=l(e))==null?void 0:R.type)!=="personnal"?(s(),_(y,{key:0,class:"w-full lg:w-3/4",placeholder:"Nom du group",name:"name",form:W,fluid:""},null,8,["form"])):x("",!0),((T=l(e))==null?void 0:T.type)!=="personnal"?(s(),_(j,{key:1})):x("",!0),((U=l(e))==null?void 0:U.type)!=="personnal"?(s(),_(A,{key:2,label:"Type de groupe"},{default:m(()=>[n(l(ue),{name:"type",class:"flex flex-wrap gap-4"},{default:m(()=>[i("div",$e,[n(l(H),{"input-id":l(k).options[1],value:l(k).options[1]},null,8,["input-id","value"]),i("label",{for:l(k).options[1]},"Occasional",8,ke)]),i("div",xe,[n(l(H),{"input-id":l(k).options[2],value:l(k).options[2]},null,8,["input-id","value"]),i("label",{for:l(k).options[2]},"Régulier",8,Ve)])]),_:1})]),_:1})):x("",!0),n(A,{label:"Choisir la couleur"},{default:m(()=>[i("div",we,[(s(!0),g(w,null,G(l(V).options.filter($=>$!=="gray"),($,O)=>(s(),_(q,{key:O,color:$,selected:l(a)===O,onClick:Fe=>f(O)},null,8,["color","selected","onClick"]))),128))])]),_:1}),n(Q,{modelValue:l(d),"onUpdate:modelValue":t[0]||(t[0]=$=>L(d)?d.value=$:null)},null,8,["modelValue"]),l(e)?(s(),g("div",Se,[n(l(M),{class:F([l(I)({color:(z=l(e))==null?void 0:z.color})]),type:"submit",label:"Modifier le groupe"},null,8,["class"]),l(e).type!=="personnal"&&l(e).userRole==="author"?(s(),_(l(M),{key:0,variant:"outlined",class:F(l(I)({color:(D=l(e))==null?void 0:D.color,outlined:!0})),label:"Supprimer le groupe",onClick:t[1]||(t[1]=$=>C())},null,8,["class"])):x("",!0)])):(s(),g("div",Me,[n(l(M),{class:F(["w-64",[l(I)({color:"gray"})]]),type:"submit",label:"Créer le groupe"},null,8,["class"])]))]}),_:1},8,["initial-values","resolver"])],64)}}});export{Le as _};
