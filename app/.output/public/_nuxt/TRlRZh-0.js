import{_ as T}from"./Bxrf48Gc.js";import{_ as D}from"./UFDYvW95.js";import{u as N}from"./BlGWc5vv.js";import{e as b,V as F,H as z,c as f,o as p,F as C,d as U,a as $,t as V,u as e,n as B,G as Y,r as M,s as k,k as R,J as O,l as v,w as h,b as _,m as w,f as A,W as H,M as I,P as L}from"./EKjwmu4X.js";import{u as j}from"./CCi297vb.js";import E from"./C2Bx1OkL.js";import J from"./DV1AUAiQ.js";import{_ as W}from"./BNfcBd3g.js";import{e as q,h as K,g as Q,a as G,d as X}from"./CPAmBVur.js";import{a as Z}from"./8G3UIhLy.js";import{u as P}from"./Drrk6M2a.js";import{u as ee}from"./9cFPbx9-.js";import"./BAVHM7yr.js";import"./CLs7nh7g.js";import"./DT05_xfd.js";import"./BvNSvTB1.js";import"./DiAjKAwH.js";import"./BuP7n0Ls.js";import"./GmmX6_XI.js";import"./CKS-U1Rg.js";import"./DW5wOTjr.js";import"./CmySksWD.js";import"./TWS-w1EI.js";import"./CizPGRaz.js";import"./ZhWAdK_X.js";import"./BmOpcpC3.js";import"./Dqon5DMq.js";import"./jc0MLXVe.js";import"./CxiRr9we.js";import"./CikSr-ZV.js";import"./zcTZZBfU.js";import"./vqib8As9.js";import"./yczKQwiS.js";import"./BiIr0IXe.js";import"./uBmaycpr.js";import"./Drh1zj0e.js";import"./hquyow-S.js";import"./7LbZrCWS.js";import"./DBNZoXWs.js";import"./B_FsHOm7.js";import"./C8QJTnKX.js";import"./ag4DBlC9.js";import"./DuIbkVjX.js";import"./bu8JTJZh.js";import"./qSTTT7Tw.js";const te=b({__name:"ItemYearBudget",props:{month:{},selectedCategory:{},year:{}},setup(y){const o=y,a=F(o,"year"),s=F(o,"selectedCategory"),{month:n}=o,{remainingBudgetInYear:u,getRemainingStyle:c}=N(a),l=z(()=>`${a.value.getFullYear()}-${n[0]}`),t=z(()=>{var r,i,d,g,m;return s.value?((d=(i=(r=u==null?void 0:u.value)==null?void 0:r[l.value])==null?void 0:i.categories.find(x=>{var S;return x.id===((S=s.value)==null?void 0:S.id)}))==null?void 0:d.remaining)??0:((m=(g=u==null?void 0:u.value)==null?void 0:g[l.value])==null?void 0:m.remaining.amount)??0});return(r,i)=>(p(),f(C,null,[U(V(e(n)[1])+" ",1),$("p",{class:B(e(c)(t.value))},V(t.value)+" €",3)],64))}}),oe={key:0,class:"grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 mt-1"},ae=b({__name:"YearBudget",props:{selectedCategory:{},selectedCategoryModifiers:{}},emits:["update:selectedCategory"],setup(y){const o=Y(y,"selectedCategory"),a=M(new Date),{group:s}=k(R()),{refetch:n,months:u}=N(a),{categories:c}=j();return O(a,l=>{l&&n()}),(l,t)=>(p(),v(D,{label:"Budget restant mois par mois"},{header:h(()=>{var r,i,d,g;return[e(c)&&e(c).filter(m=>m.label!=="default").length>0?(p(),v(e(J),{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),editable:"","show-clear":"",options:(r=e(c))==null?void 0:r.filter(m=>m.label!=="default"),"option-label":"label",placeholder:"Choisir une catégorie",class:B(["ml-auto md:w-56",[`bg-${(i=o.value)==null?void 0:i.color}-50`,`hover:bg-${(d=o.value)==null?void 0:d.color}-100`]]),"label-class":["capitalize",`text-${(g=o.value)==null?void 0:g.color}-600`]},null,8,["modelValue","options","class","label-class"])):w("",!0)]}),default:h(()=>[_(e(E),{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),view:"year","date-format":"yy",class:"w-64 mx-auto mt-3","input-class":"text-center"},null,8,["modelValue"]),e(s)?(p(),f("section",oe,[(p(!0),f(C,null,A(Object.entries(e(u)),(r,i)=>(p(),f("div",{key:i,class:"item"},[_(te,{month:r,year:a.value,"selected-category":o.value},null,8,["month","year","selected-category"])]))),128))])):w("",!0)]),_:1}))}}),re=b({__name:"DayBudget",props:{date:{},expensesInDay:{},color:{}},setup(y){return(o,a)=>(p(),f("p",{class:B(o.expensesInDay&&o.expensesInDay.length>0&&e(Z)({color:o.color,text:700}).text)},V(o.date.day),3))}}),se={class:"flex flex-col gap-10"},le={class:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ne=b({__name:"MonthBudget",setup(y){const{group:o}=k(R()),a=M(null),s=M(q()),{expensesByMonthAndGroup:n,refetchByMonthAndGroup:u}=P();return O(s,()=>{u()}),(c,l)=>(p(),v(D,{label:"Les dépenses passés et futurs"},{default:h(()=>[$("div",se,[_(e(E),{modelValue:e(a),"onUpdate:modelValue":l[0]||(l[0]=t=>I(a)?a.value=t:null),inline:"","panel-class":"border-none shadow rounded-xl ",class:"w-full",onMonthChange:l[1]||(l[1]=t=>{s.value=e(Q)(new Date(t.year,t.month-1))}),onYearChange:l[2]||(l[2]=t=>{s.value=e(K)(new Date(t.year,t.month-1))})},H({_:2},[e(n)?{name:"date",fn:h(t=>{var r,i;return[_(re,{date:t.date,"expenses-in-day":(r=e(n))==null?void 0:r[`${t.date.year}/${t.date.day}/${t.date.month}`],color:((i=e(o))==null?void 0:i.color)??"gray"},null,8,["date","expenses-in-day","color"])]}),key:"0"}:void 0]),1032,["modelValue"]),e(o)&&e(a)&&e(n)&&e(n)[e(G)(e(a))]?(p(),v(D,{key:0,label:e(X)(e(a))},{default:h(()=>[$("div",le,[(p(!0),f(C,null,A(e(n)[e(G)(e(a))],t=>{var r;return p(),v(W,{key:t.id,expense:t,"group-id":(r=e(o))==null?void 0:r.id},null,8,["expense","group-id"])}),128))])]),_:1},8,["label"])):w("",!0)])]),_:1}))}}),ue={class:"flex flex-col gap-10"},et=b({__name:"forecast",setup(y){var n,u,c,l,t;const o=L(),{group_id:a}=o.params,{group:s}=k(R());return ee({title:`Récapitulatif du budget du groupe ${(n=s.value)==null?void 0:n.name}`,description:`Consultez le bilan budgétaire du groupe ${(u=s.value)==null?void 0:u.name} : dépenses par catégorie, écarts, soldes et évolution mensuelle.`,ogTitle:`Bilan du budget - ${(c=s.value)==null?void 0:c.name}`,ogDescription:`Analyse complète du budget du groupe ${(l=s.value)==null?void 0:l.name}. Visualisez les totaux, les écarts et la répartition des dépenses pour une meilleure gestion collective.`,image:((t=s.value)==null?void 0:t.picture)??void 0}),(r,i)=>{var x;const d=T,g=ae,m=ne;return p(),f(C,null,[_(d,{label:"Récap budgets",color:(x=e(s))==null?void 0:x.color,to:`/groups/${e(a)}/budget`},null,8,["color","to"]),$("div",ue,[_(g,{group_id:e(a)},null,8,["group_id"]),_(m,{"group-id":e(a)},null,8,["group-id"])])],64)}}});export{et as default};
