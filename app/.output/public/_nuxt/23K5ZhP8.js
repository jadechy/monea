import{g as R,J as D,Y as F,r as K,I as u,Z as r,q as M}from"./9_oEEP4X.js";import{u as S}from"./sR-6vvAt.js";import{e as Y,h as I,g as a,a as Q}from"./CPAmBVur.js";const w=e=>{const o=R(),g=D(),{group_id:t}=g.params,n=F();e||(e=K(Y()));const{fetchBudgetRemainingInYear:d,fetchAllBudgetCategoriesByGroup:l,fetchAllRemainingBudgetCategoriesByGroup:c,postBudgets:m}=S(),v={"01":"Janvier","02":"Février","03":"Mars","04":"Avril","05":"Mai","06":"Juin","07":"Juillet","08":"Août","09":"Septembre",10:"Octobre",11:"Novembre",12:"Décembre"},f=u(()=>e!=null&&e.value?I(e.value):new Date),i=u(()=>e!=null&&e.value?a(e.value):new Date),{data:b,refetch:h}=r({queryKey:["budgetRemainingInYear",t,e],queryFn:()=>d(t,Q(f.value)),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),{data:p,refetch:B}=r({queryKey:["budgetCategories",t,i],queryFn:()=>l(t,i.value),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),{data:q}=r({queryKey:["budgetRemainingCategories",t,i],queryFn:()=>c(t,i.value),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),C=M({mutationFn:s=>m(s),onSuccess:async()=>{e!=null&&e.value&&(await Promise.all([n.invalidateQueries({queryKey:["budgetRemainingCategories",t,a(e.value)]}),n.invalidateQueries({queryKey:["budgetCategories",t,a(e.value)]}),n.invalidateQueries({queryKey:["budget","initial",Number(t)]}),n.invalidateQueries({queryKey:["budget","remaining",Number(t)]})]),o.push(`/groups/${t}/budget`))}});return{refetch:h,months:v,postBudgetsMutation:C,remainingBudget:q,budgetList:p,refetchBudget:B,remainingBudgetInYear:b,getRemainingStyle:s=>s===0?"text-dark-700":s>0?"text-green-700":"text-red-700"}};export{w as u};
