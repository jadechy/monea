import{_ as M}from"./BXLN-2ti.js";import{_ as B}from"./xpL0GtKN.js";import{_ as D}from"./Ct2Kg15V.js";import{_ as E}from"./B5QTIg_o.js";import{g}from"./8G3UIhLy.js";import{d as z,i as v,j as b,k as F,c as N,b as o,u as e,w as p,F as P,o as y,l as U,m as j,U as T,e as V,g as I,n as C}from"./DZ2khTnM.js";import O from"./CFd5_Piq.js";import A from"./BQuv8gv2.js";import"./D0fJx_nL.js";import{h as H}from"./DuJv_D_N.js";import{c as L}from"./CPAmBVur.js";import{u as R}from"./DDT-kY3b.js";import"./Cnm4LbfB.js";import"./Hbwuj-1z.js";import"./BO-eBnTB.js";import"./xFnIkFpr.js";import"./6sD3ePS7.js";import"./BpxfxKT9.js";import"./CLs7nh7g.js";import"./DQrM28XS.js";import"./dV31eLeC.js";import"./B3kXyQam.js";import"./DPiWrF-R.js";import"./kD-r-boF.js";import"./N6u5SXv9.js";import"./BCFG6or-.js";const W={class:"w-full flex flex-col items-center gap-3"},yo=z({__name:"edit",setup($){var u;const{updateUser:k,deleteUserMutation:w}=v(),{user:s}=b(v()),{personnalGroup:m}=b(F()),S=t=>{if(!t.valid)return;const i=Object.entries(t.states).reduce((n,[r,l])=>{const c=r;return n[c]=l.value,n},{});k.mutate({...i,birthday:L(i.birthday)})};R({title:"Modifier mon compte",description:"Mettez à jour vos informations personnelles, paramètres de sécurité et préférences de compte sur Monéa.",ogTitle:"Édition de compte",ogDescription:"Personnalisez et sécurisez votre compte utilisateur en modifiant vos informations sur Monéa.",image:((u=s.value)==null?void 0:u.picture)??void 0});const G=()=>{confirm("Es-tu sûr de vouloir supprimer ton compte ?")&&w.mutate()};return(t,i)=>{var f;const n=M,r=B,l=O,c=D,d=I,x=E;return y(),N(P,null,[o(n,{label:"Modifier mon profil",color:((f=e(m))==null?void 0:f.color)||"gray",to:"/user"},null,8,["color"]),o(x,null,{default:p(()=>[e(s)?(y(),U(e(A),{key:0,"initial-values":e(s),resolver:e(H)(e(T)),class:"flex flex-col md:w-1/2 mx-5 md:mx-auto gap-6 items-center",onSubmit:S},{default:p(a=>{var _,h;return[o(r,{name:"lastname",placeholder:"Nom",form:a},null,8,["form"]),o(r,{name:"name",placeholder:"Prénom",form:a},null,8,["form"]),o(c,{name:"birthday",placeholder:"Date de naissance",form:a},{default:p(()=>[o(l,{"date-format":"dd/mm/yy","show-icon":"",fluid:"",name:"birthday",class:"w-full","icon-display":"input"})]),_:2},1032,["form"]),o(r,{name:"email",placeholder:"Email",type:"email",form:a,autocomplete:"email"},null,8,["form"]),o(r,{name:"username",placeholder:"Pseudonyme",form:a,autocomplete:"username"},null,8,["form"]),V("div",W,[o(d,{type:"submit",class:C(["w-64",[("getGroupColor"in t?t.getGroupColor:e(g))({color:(_=e(m))==null?void 0:_.color})]]),label:"Enregistrer les modifications"},null,8,["class"]),o(d,{variant:"outlined",class:C(["w-64",[("getGroupColor"in t?t.getGroupColor:e(g))({color:(h=e(m))==null?void 0:h.color,outlined:!0})]]),label:"Supprimer mon compte",onClick:G},null,8,["class"])])]}),_:1},8,["initial-values","resolver"])):j("",!0)]),_:1})],64)}}});export{yo as default};
