import{_ as T}from"./BXLN-2ti.js";import{_ as D}from"./BY0E9GD9.js";import{u as O}from"./Bh-hiYRa.js";import{d as b,$ as F,M as z,c as f,o as c,F as C,q as U,e as $,t as M,u as e,n as B,K as Y,r as V,j as k,k as S,P as A,l as v,w as h,b as _,m as w,a as E,a0 as j,S as H,H as I}from"./DZ2khTnM.js";import{u as L}from"./jzm56w66.js";import G from"./CFd5_Piq.js";import q from"./BRjEZLyQ.js";import{_ as K}from"./CSHvLOsw.js";import{e as J,h as Q,g as W,a as N,d as X}from"./CPAmBVur.js";import{a as Z}from"./8G3UIhLy.js";import{u as P}from"./BgF1Ijsv.js";import{u as ee}from"./DDT-kY3b.js";import"./Dtrs6cea.js";import"./CLs7nh7g.js";import"./DQrM28XS.js";import"./dV31eLeC.js";import"./B3kXyQam.js";import"./DPiWrF-R.js";import"./kD-r-boF.js";import"./Cnm4LbfB.js";import"./Hbwuj-1z.js";import"./BO-eBnTB.js";import"./N6u5SXv9.js";import"./BCFG6or-.js";import"./DdLFPiAP.js";import"./BRyW-3J6.js";import"./B6a3AwkD.js";import"./BpxfxKT9.js";import"./DUvr8uhX.js";import"./DydMYJxZ.js";import"./D8dZjDoE.js";import"./C0Kuc3g1.js";import"./ag4DBlC9.js";import"./DMYLz6t7.js";import"./CIBVQf5O.js";const te=b({__name:"ItemYearBudget",props:{month:{},selectedCategory:{},year:{}},setup(y){const o=y,a=F(o,"year"),s=F(o,"selectedCategory"),{month:n}=o,{remainingBudgetInYear:u,getRemainingStyle:p}=O(a),l=z(()=>`${a.value.getFullYear()}-${n[0]}`),t=z(()=>{var r,i,m,g,d;return s.value?((m=(i=(r=u==null?void 0:u.value)==null?void 0:r[l.value])==null?void 0:i.categories.find(x=>{var R;return x.id===((R=s.value)==null?void 0:R.id)}))==null?void 0:m.remaining)??0:((d=(g=u==null?void 0:u.value)==null?void 0:g[l.value])==null?void 0:d.remaining.amount)??0});return(r,i)=>(c(),f(C,null,[U(M(e(n)[1])+" ",1),$("p",{class:B(e(p)(t.value))},M(t.value)+" €",3)],64))}}),oe={key:0,class:"grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 mt-1"},ae=b({__name:"YearBudget",props:{selectedCategory:{},selectedCategoryModifiers:{}},emits:["update:selectedCategory"],setup(y){const o=Y(y,"selectedCategory"),a=V(new Date),{group:s}=k(S()),{refetch:n,months:u}=O(a),{categories:p}=L();return A(a,l=>{l&&n()}),(l,t)=>(c(),v(D,{label:"Budget restant mois par mois"},{header:h(()=>{var r,i,m,g;return[e(p)&&e(p).filter(d=>d.label!=="default").length>0?(c(),v(e(q),{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),editable:"","show-clear":"",options:(r=e(p))==null?void 0:r.filter(d=>d.label!=="default"),"option-label":"label",placeholder:"Choisir une catégorie",class:B(["ml-auto md:w-56",[`bg-${(i=o.value)==null?void 0:i.color}-50`,`hover:bg-${(m=o.value)==null?void 0:m.color}-100`]]),"label-class":["capitalize",`text-${(g=o.value)==null?void 0:g.color}-600`]},null,8,["modelValue","options","class","label-class"])):w("",!0)]}),default:h(()=>[_(e(G),{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),view:"year","date-format":"yy",class:"w-64 mx-auto mt-3","input-class":"text-center"},null,8,["modelValue"]),e(s)?(c(),f("section",oe,[(c(!0),f(C,null,E(Object.entries(e(u)),(r,i)=>(c(),f("div",{key:i,class:"item"},[_(te,{month:r,year:a.value,"selected-category":o.value},null,8,["month","year","selected-category"])]))),128))])):w("",!0)]),_:1}))}}),re=b({__name:"DayBudget",props:{date:{},expensesInDay:{},color:{}},setup(y){return(o,a)=>(c(),f("p",{class:B(o.expensesInDay&&o.expensesInDay.length>0&&e(Z)({color:o.color,text:700}).text)},M(o.date.day),3))}}),se={class:"flex flex-col gap-10"},le={class:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ne=b({__name:"MonthBudget",setup(y){const{group:o}=k(S()),a=V(null),s=V(J()),{expensesByMonthAndGroup:n,refetchByMonthAndGroup:u}=P();return A(s,()=>{u()}),(p,l)=>(c(),v(D,{label:"Les dépenses passés et futurs"},{default:h(()=>[$("div",se,[_(e(G),{modelValue:e(a),"onUpdate:modelValue":l[0]||(l[0]=t=>H(a)?a.value=t:null),inline:"","panel-class":"border-none shadow rounded-xl ",class:"w-full",onMonthChange:l[1]||(l[1]=t=>{s.value=e(W)(new Date(t.year,t.month-1))}),onYearChange:l[2]||(l[2]=t=>{s.value=e(Q)(new Date(t.year,t.month-1))})},j({_:2},[e(n)?{name:"date",fn:h(t=>{var r,i;return[_(re,{date:t.date,"expenses-in-day":(r=e(n))==null?void 0:r[`${t.date.year}/${t.date.day}/${t.date.month}`],color:((i=e(o))==null?void 0:i.color)??"gray"},null,8,["date","expenses-in-day","color"])]}),key:"0"}:void 0]),1032,["modelValue"]),e(o)&&e(a)&&e(n)&&e(n)[e(N)(e(a))]?(c(),v(D,{key:0,label:e(X)(e(a))},{default:h(()=>[$("div",le,[(c(!0),f(C,null,E(e(n)[e(N)(e(a))],t=>{var r;return c(),v(K,{key:t.id,expense:t,"group-id":(r=e(o))==null?void 0:r.id},null,8,["expense","group-id"])}),128))])]),_:1},8,["label"])):w("",!0)])]),_:1}))}}),ue={class:"flex flex-col gap-10"},Ie=b({__name:"forecast",setup(y){var n,u,p,l,t;const o=I(),{group_id:a}=o.params,{group:s}=k(S());return ee({title:`Récapitulatif du budget du groupe ${(n=s.value)==null?void 0:n.name}`,description:`Consultez le bilan budgétaire du groupe ${(u=s.value)==null?void 0:u.name} : dépenses par catégorie, écarts, soldes et évolution mensuelle.`,ogTitle:`Bilan du budget - ${(p=s.value)==null?void 0:p.name}`,ogDescription:`Analyse complète du budget du groupe ${(l=s.value)==null?void 0:l.name}. Visualisez les totaux, les écarts et la répartition des dépenses pour une meilleure gestion collective.`,image:((t=s.value)==null?void 0:t.picture)??void 0}),(r,i)=>{var x;const m=T,g=ae,d=ne;return c(),f(C,null,[_(m,{label:"Récap budgets",color:(x=e(s))==null?void 0:x.color,to:`/groups/${e(a)}/budget`},null,8,["color","to"]),$("div",ue,[_(g,{group_id:e(a)},null,8,["group_id"]),_(d,{"group-id":e(a)},null,8,["group-id"])])],64)}}});export{Ie as default};
