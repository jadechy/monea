import{f as R,H as D,a1 as M,r as F,M as u,a2 as a,x as K}from"./DZ2khTnM.js";import{u as S}from"./Dtrs6cea.js";import{e as Q,h as Y,g as r,a as x}from"./CPAmBVur.js";const J=e=>{const o=R(),g=D(),{group_id:t}=g.params,n=M();e||(e=F(Q()));const{fetchBudgetRemainingInYear:d,fetchAllBudgetCategoriesByGroup:l,fetchAllRemainingBudgetCategoriesByGroup:c,postBudgets:m}=S(),v={"01":"Janvier","02":"Février","03":"Mars","04":"Avril","05":"Mai","06":"Juin","07":"Juillet","08":"Août","09":"Septembre",10:"Octobre",11:"Novembre",12:"Décembre"},f=u(()=>e!=null&&e.value?Y(e.value):new Date),i=u(()=>e!=null&&e.value?r(e.value):new Date),{data:b,refetch:h}=a({queryKey:["budgetRemainingInYear",t,e],queryFn:()=>d(t,x(f.value)),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),{data:p,refetch:B}=a({queryKey:["budgetCategories",t,i],queryFn:()=>l(t,i.value),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),{data:q}=a({queryKey:["budgetRemainingCategories",t,i],queryFn:()=>c(t,i.value),enabled:u(()=>!!t&&!!(e!=null&&e.value))}),C=K({mutationFn:s=>m(s),onSuccess:async()=>{e!=null&&e.value&&(await Promise.all([n.invalidateQueries({queryKey:["budgetRemainingCategories",t,r(e.value)]}),n.invalidateQueries({queryKey:["budgetCategories",t,r(e.value)]}),n.invalidateQueries({queryKey:["budget","initial",t]}),n.invalidateQueries({queryKey:["budget","remaining",t]})]),o.push(`/groups/${t}/budget`))}});return{refetch:h,months:v,postBudgetsMutation:C,remainingBudget:q,budgetList:p,refetchBudget:B,remainingBudgetInYear:b,getRemainingStyle:s=>s===0?"text-dark-700":s>0?"text-green-700":"text-red-700"}};export{J as u};
