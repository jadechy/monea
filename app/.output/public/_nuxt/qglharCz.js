import{_ as I}from"./9Q_eMRf-.js";import{_ as D}from"./CSaAB4sJ.js";import{u as N}from"./23K5ZhP8.js";import{e as b,W as F,I as O,c as f,o as p,F as C,d as T,a as $,t as V,u as e,n as B,H as U,r as M,s as k,j as R,K as A,k as v,w as h,b as _,l as w,f as E,X as Y,O as j,J as H}from"./9_oEEP4X.js";import{u as L}from"./CEJFT3iM.js";import G from"./CMpKrdlj.js";import J from"./LrrkQ-3L.js";import{_ as K}from"./CEwj9z-G.js";import{e as W,h as X,g as q,a as z,d as Q}from"./CPAmBVur.js";import{a as Z}from"./8G3UIhLy.js";import{u as P}from"./BPCttJrX.js";import{u as ee}from"./BHh8LejF.js";import"./sR-6vvAt.js";import"./CLs7nh7g.js";import"./CaZjLVwF.js";import"./6-RqjL22.js";import"./DTnTjCsu.js";import"./XgKJ66ug.js";import"./p525COBN.js";import"./OFoVOuEf.js";import"./CE5BWmKq.js";import"./nRL5h7cE.js";import"./CZJ6SyKg.js";import"./DCcdEoKi.js";import"./ZhWAdK_X.js";import"./BLgDm5E4.js";import"./CaOMTmc6.js";import"./jc0MLXVe.js";import"./BNHGdZac.js";import"./BmDdxOAi.js";import"./CaAMCX_S.js";import"./DIQ79adz.js";import"./CUD4bfD5.js";import"./NIMv85Yu.js";import"./Dw-5cy0N.js";import"./HlX-TDzR.js";import"./CEdPnMsf.js";import"./Dal3zcbz.js";import"./BzfY0XUM.js";import"./CWdJk-7y.js";import"./B6XL0mwY.js";import"./ag4DBlC9.js";import"./CveYnYq0.js";import"./CYgBjTpX.js";import"./CIWyJgqJ.js";const te=b({__name:"ItemYearBudget",props:{month:{},selectedCategory:{},year:{}},setup(y){const o=y,a=F(o,"year"),s=F(o,"selectedCategory"),{month:n}=o,{remainingBudgetInYear:u,getRemainingStyle:c}=N(a),l=O(()=>`${a.value.getFullYear()}-${n[0]}`),t=O(()=>{var r,i,d,g,m;return s.value?((d=(i=(r=u==null?void 0:u.value)==null?void 0:r[l.value])==null?void 0:i.categories.find(x=>{var S;return x.id===((S=s.value)==null?void 0:S.id)}))==null?void 0:d.remaining)??0:((m=(g=u==null?void 0:u.value)==null?void 0:g[l.value])==null?void 0:m.remaining.amount)??0});return(r,i)=>(p(),f(C,null,[T(V(e(n)[1])+" ",1),$("p",{class:B(e(c)(t.value))},V(t.value)+" €",3)],64))}}),oe={key:0,class:"grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 mt-1"},ae=b({__name:"YearBudget",props:{selectedCategory:{},selectedCategoryModifiers:{}},emits:["update:selectedCategory"],setup(y){const o=U(y,"selectedCategory"),a=M(new Date),{group:s}=k(R()),{refetch:n,months:u}=N(a),{categories:c}=L();return A(a,l=>{l&&n()}),(l,t)=>(p(),v(D,{label:"Budget restant mois par mois"},{header:h(()=>{var r,i,d,g;return[e(c)&&e(c).filter(m=>m.label!=="default").length>0?(p(),v(e(J),{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),editable:"","show-clear":"",options:(r=e(c))==null?void 0:r.filter(m=>m.label!=="default"),"option-label":"label",placeholder:"Choisir une catégorie",class:B(["ml-auto md:w-56",[`bg-${(i=o.value)==null?void 0:i.color}-50`,`hover:bg-${(d=o.value)==null?void 0:d.color}-100`]]),"label-class":["capitalize",`text-${(g=o.value)==null?void 0:g.color}-600`]},null,8,["modelValue","options","class","label-class"])):w("",!0)]}),default:h(()=>[_(e(G),{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),view:"year","date-format":"yy",class:"w-64 mx-auto mt-3","input-class":"text-center"},null,8,["modelValue"]),e(s)?(p(),f("section",oe,[(p(!0),f(C,null,E(Object.entries(e(u)),(r,i)=>(p(),f("div",{key:i,class:"item"},[_(te,{month:r,year:a.value,"selected-category":o.value},null,8,["month","year","selected-category"])]))),128))])):w("",!0)]),_:1}))}}),re=b({__name:"DayBudget",props:{date:{},expensesInDay:{},color:{}},setup(y){return(o,a)=>(p(),f("p",{class:B(o.expensesInDay&&o.expensesInDay.length>0&&e(Z)({color:o.color,text:700}).text)},V(o.date.day),3))}}),se={class:"flex flex-col gap-10"},le={class:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ne=b({__name:"MonthBudget",setup(y){const{group:o}=k(R()),a=M(null),s=M(W()),{expensesByMonthAndGroup:n,refetchByMonthAndGroup:u}=P();return A(s,()=>{u()}),(c,l)=>(p(),v(D,{label:"Les dépenses passés et futurs"},{default:h(()=>[$("div",se,[_(e(G),{modelValue:e(a),"onUpdate:modelValue":l[0]||(l[0]=t=>j(a)?a.value=t:null),inline:"","panel-class":"border-none shadow rounded-xl ",class:"w-full",onMonthChange:l[1]||(l[1]=t=>{s.value=e(q)(new Date(t.year,t.month-1))}),onYearChange:l[2]||(l[2]=t=>{s.value=e(X)(new Date(t.year,t.month-1))})},Y({_:2},[e(n)?{name:"date",fn:h(t=>{var r,i;return[_(re,{date:t.date,"expenses-in-day":(r=e(n))==null?void 0:r[`${t.date.year}/${t.date.day}/${t.date.month}`],color:((i=e(o))==null?void 0:i.color)??"gray"},null,8,["date","expenses-in-day","color"])]}),key:"0"}:void 0]),1032,["modelValue"]),e(o)&&e(a)&&e(n)&&e(n)[e(z)(e(a))]?(p(),v(D,{key:0,label:e(Q)(e(a))},{default:h(()=>[$("div",le,[(p(!0),f(C,null,E(e(n)[e(z)(e(a))],t=>{var r;return p(),v(K,{key:t.id,expense:t,"group-id":(r=e(o))==null?void 0:r.id},null,8,["expense","group-id"])}),128))])]),_:1},8,["label"])):w("",!0)])]),_:1}))}}),ue={class:"flex flex-col gap-10"},et=b({__name:"forecast",setup(y){var n,u,c,l,t;const o=H(),{group_id:a}=o.params,{group:s}=k(R());return ee({title:`Récapitulatif du budget du groupe ${(n=s.value)==null?void 0:n.name}`,description:`Consultez le bilan budgétaire du groupe ${(u=s.value)==null?void 0:u.name} : dépenses par catégorie, écarts, soldes et évolution mensuelle.`,ogTitle:`Bilan du budget - ${(c=s.value)==null?void 0:c.name}`,ogDescription:`Analyse complète du budget du groupe ${(l=s.value)==null?void 0:l.name}. Visualisez les totaux, les écarts et la répartition des dépenses pour une meilleure gestion collective.`,image:((t=s.value)==null?void 0:t.picture)??void 0}),(r,i)=>{var x;const d=I,g=ae,m=ne;return p(),f(C,null,[_(d,{label:"Récap budgets",color:(x=e(s))==null?void 0:x.color,to:`/groups/${e(a)}/budget`},null,8,["color","to"]),$("div",ue,[_(g,{group_id:e(a)},null,8,["group_id"]),_(m,{"group-id":e(a)},null,8,["group-id"])])],64)}}});export{et as default};
