import{_ as E}from"./CkjdEKrZ.js";import{_ as D}from"./DruMC_ug.js";import{u as G}from"./CVCKDgWi.js";import{e as b,Y as F,K as O,c as f,o as p,F as C,d as T,a as $,t as V,u as e,n as B,J as U,r as M,s as k,j as R,O as N,k as v,w as h,b as _,l as w,f as Y,Z as j,Q as I,G as L}from"./B4C1c3y9.js";import{u as H}from"./CfGnfSXj.js";import A from"./AxJl-wT4.js";import J from"./DV0oAg31.js";import{_ as K}from"./DIIaRXug.js";import{e as Q,h as Z,g as q,a as z,d as W}from"./CPAmBVur.js";import{a as X}from"./8G3UIhLy.js";import{u as P}from"./CgAfBL5V.js";import{u as ee}from"./C45g08Ar.js";import"./Dz4qWlxs.js";import"./CLs7nh7g.js";import"./Sx2Q1i01.js";import"./DGOriwfr.js";import"./yOe6c3TM.js";import"./BG6yOVPh.js";import"./wgfyke9o.js";import"./DD9exzw8.js";import"./BTinR4uF.js";import"./CDF5jS1J.js";import"./DfIvkuC_.js";import"./DDRO_9ox.js";import"./ZhWAdK_X.js";import"./CG7fiWaA.js";import"./B-SteLpu.js";import"./jc0MLXVe.js";import"./GLQTXrRA.js";import"./BP-om_zl.js";import"./Drkg7K07.js";import"./DFCF-WRp.js";import"./DFRwXp6x.js";import"./Swh8u4zP.js";import"./DD1138Lm.js";import"./BYHpO0j1.js";import"./FS8s-9Kc.js";import"./CPUHtisY.js";import"./CCLo0wKF.js";import"./Bp61RG3H.js";import"./Be9F72kc.js";import"./ag4DBlC9.js";import"./FbeXejfl.js";import"./DUKp_tYz.js";import"./C1pTgOiJ.js";const te=b({__name:"ItemYearBudget",props:{month:{},selectedCategory:{},year:{}},setup(y){const o=y,a=F(o,"year"),s=F(o,"selectedCategory"),{month:n}=o,{remainingBudgetInYear:u,getRemainingStyle:c}=G(a),l=O(()=>`${a.value.getFullYear()}-${n[0]}`),t=O(()=>{var r,i,d,g,m;return s.value?((d=(i=(r=u==null?void 0:u.value)==null?void 0:r[l.value])==null?void 0:i.categories.find(x=>{var S;return x.id===((S=s.value)==null?void 0:S.id)}))==null?void 0:d.remaining)??0:((m=(g=u==null?void 0:u.value)==null?void 0:g[l.value])==null?void 0:m.remaining.amount)??0});return(r,i)=>(p(),f(C,null,[T(V(e(n)[1])+" ",1),$("p",{class:B(e(c)(t.value))},V(t.value)+" €",3)],64))}}),oe={key:0,class:"grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 mt-1"},ae=b({__name:"YearBudget",props:{selectedCategory:{},selectedCategoryModifiers:{}},emits:["update:selectedCategory"],setup(y){const o=U(y,"selectedCategory"),a=M(new Date),{group:s}=k(R()),{refetch:n,months:u}=G(a),{categories:c}=H();return N(a,l=>{l&&n()}),(l,t)=>(p(),v(D,{label:"Budget restant mois par mois"},{header:h(()=>{var r,i,d,g;return[e(c)&&e(c).filter(m=>m.label!=="default").length>0?(p(),v(e(J),{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),editable:"","show-clear":"",options:(r=e(c))==null?void 0:r.filter(m=>m.label!=="default"),"option-label":"label",placeholder:"Choisir une catégorie",class:B(["ml-auto md:w-56",[`bg-${(i=o.value)==null?void 0:i.color}-50`,`hover:bg-${(d=o.value)==null?void 0:d.color}-100`]]),"label-class":["capitalize",`text-${(g=o.value)==null?void 0:g.color}-600`]},null,8,["modelValue","options","class","label-class"])):w("",!0)]}),default:h(()=>[_(e(A),{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),view:"year","date-format":"yy",class:"w-64 mx-auto mt-3","input-class":"text-center"},null,8,["modelValue"]),e(s)?(p(),f("section",oe,[(p(!0),f(C,null,Y(Object.entries(e(u)),(r,i)=>(p(),f("div",{key:i,class:"item"},[_(te,{month:r,year:a.value,"selected-category":o.value},null,8,["month","year","selected-category"])]))),128))])):w("",!0)]),_:1}))}}),re=b({__name:"DayBudget",props:{date:{},expensesInDay:{},color:{}},setup(y){return(o,a)=>(p(),f("p",{class:B(o.expensesInDay&&o.expensesInDay.length>0&&e(X)({color:o.color,text:700}).text)},V(o.date.day),3))}}),se={class:"flex flex-col gap-10"},le={class:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ne=b({__name:"MonthBudget",setup(y){const{group:o}=k(R()),a=M(null),s=M(Q()),{expensesByMonthAndGroup:n,refetchByMonthAndGroup:u}=P();return N(s,()=>{u()}),(c,l)=>(p(),v(D,{label:"Les dépenses passés et futurs"},{default:h(()=>[$("div",se,[_(e(A),{modelValue:e(a),"onUpdate:modelValue":l[0]||(l[0]=t=>I(a)?a.value=t:null),inline:"","panel-class":"border-none shadow rounded-xl ",class:"w-full",onMonthChange:l[1]||(l[1]=t=>{s.value=e(q)(new Date(t.year,t.month-1))}),onYearChange:l[2]||(l[2]=t=>{s.value=e(Z)(new Date(t.year,t.month-1))})},j({_:2},[e(n)?{name:"date",fn:h(t=>{var r,i;return[_(re,{date:t.date,"expenses-in-day":(r=e(n))==null?void 0:r[`${t.date.year}/${t.date.day}/${t.date.month}`],color:((i=e(o))==null?void 0:i.color)??"gray"},null,8,["date","expenses-in-day","color"])]}),key:"0"}:void 0]),1032,["modelValue"]),e(o)&&e(a)&&e(n)&&e(n)[e(z)(e(a))]?(p(),v(D,{key:0,label:e(W)(e(a))},{default:h(()=>[$("div",le,[(p(!0),f(C,null,Y(e(n)[e(z)(e(a))],t=>{var r;return p(),v(K,{key:t.id,expense:t,"group-id":(r=e(o))==null?void 0:r.id},null,8,["expense","group-id"])}),128))])]),_:1},8,["label"])):w("",!0)])]),_:1}))}}),ue={class:"flex flex-col gap-10"},et=b({__name:"forecast",setup(y){var n,u,c,l,t;const o=L(),{group_id:a}=o.params,{group:s}=k(R());return ee({title:`Récapitulatif du budget du groupe ${(n=s.value)==null?void 0:n.name}`,description:`Consultez le bilan budgétaire du groupe ${(u=s.value)==null?void 0:u.name} : dépenses par catégorie, écarts, soldes et évolution mensuelle.`,ogTitle:`Bilan du budget - ${(c=s.value)==null?void 0:c.name}`,ogDescription:`Analyse complète du budget du groupe ${(l=s.value)==null?void 0:l.name}. Visualisez les totaux, les écarts et la répartition des dépenses pour une meilleure gestion collective.`,image:((t=s.value)==null?void 0:t.picture)??void 0}),(r,i)=>{var x;const d=E,g=ae,m=ne;return p(),f(C,null,[_(d,{label:"Récap budgets",color:(x=e(s))==null?void 0:x.color,to:`/groups/${e(a)}/budget`},null,8,["color","to"]),$("div",ue,[_(g,{group_id:e(a)},null,8,["group_id"]),_(m,{"group-id":e(a)},null,8,["group-id"])])],64)}}});export{et as default};
