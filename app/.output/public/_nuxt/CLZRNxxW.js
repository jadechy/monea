import{_ as M}from"./CQKlYdAX.js";import{_ as B}from"./Cxs-BJzB.js";import{_ as D}from"./CakbTWbQ.js";import{_ as E}from"./CYo6WSMU.js";import{g as v}from"./8G3UIhLy.js";import z from"./DbMJwvrn.js";import F from"./DZkgDdD1.js";import N from"./Bd1vvzrv.js";import"./Rlg9D9va.js";import{h as P}from"./B5PqLXA1.js";import{e as U,i as g,s as b,j,c as T,b as o,u as e,w as c,F as V,o as y,k as I,l as O,U as A,a as H,n as C}from"./BTX94YAq.js";import{c as L}from"./CPAmBVur.js";import{u as R}from"./CtkOBvz2.js";import"./DBLxj22t.js";import"./D8ipcQdB.js";import"./C7_W_cE5.js";import"./CopWEzVM.js";import"./ZhWAdK_X.js";import"./gNKMlgmB.js";import"./CBl5t_T3.js";import"./DX-cBEd5.js";import"./Blw0GjGl.js";import"./D89rpbAD.js";import"./D2XUhv8z.js";import"./jc0MLXVe.js";import"./BrWwbcGC.js";import"./_Yny5mIu.js";import"./CLs7nh7g.js";import"./H0TUT33k.js";import"./UQ10w5bP.js";import"./CpiacxYV.js";import"./C0tgR__t.js";import"./--r7Dmws.js";import"./0yFrKMrj.js";import"./DJq8NgV0.js";import"./CJnyPQ8d.js";const W={class:"w-full flex flex-col items-center gap-3"},Eo=U({__name:"edit",setup($){var u;const{updateUser:k,deleteUserMutation:w}=g(),{user:a}=b(g()),{personnalGroup:n}=b(j()),S=t=>{if(!t.valid)return;const s=Object.entries(t.states).reduce((i,[r,l])=>{const p=r;return i[p]=l.value,i},{});k.mutate({...s,birthday:L(s.birthday)})};R({title:"Modifier mon compte",description:"Mettez à jour vos informations personnelles, paramètres de sécurité et préférences de compte sur Monéa.",ogTitle:"Édition de compte",ogDescription:"Personnalisez et sécurisez votre compte utilisateur en modifiant vos informations sur Monéa.",image:((u=a.value)==null?void 0:u.picture)??void 0});const G=()=>{confirm("Es-tu sûr de vouloir supprimer ton compte ?")&&w.mutate()};return(t,s)=>{var f;const i=M,r=B,l=F,p=D,d=z,x=E;return y(),T(V,null,[o(i,{label:"Modifier mon profil",color:((f=e(n))==null?void 0:f.color)||"gray",to:"/user"},null,8,["color"]),o(x,null,{default:c(()=>[e(a)?(y(),I(e(N),{key:0,"initial-values":e(a),resolver:e(P)(e(A)),class:"flex flex-col md:w-1/2 mx-5 md:mx-auto gap-6 items-center",onSubmit:S},{default:c(m=>{var _,h;return[o(r,{name:"lastname",placeholder:"Nom",form:m},null,8,["form"]),o(r,{name:"name",placeholder:"Prénom",form:m},null,8,["form"]),o(p,{name:"birthday",placeholder:"Date de naissance",form:m},{default:c(()=>[o(l,{"date-format":"dd/mm/yy","show-icon":"",fluid:"",name:"birthday",class:"w-full","icon-display":"input"})]),_:2},1032,["form"]),o(r,{name:"email",placeholder:"Email",type:"email",form:m,autocomplete:"email"},null,8,["form"]),o(r,{name:"username",placeholder:"Pseudonyme",form:m,autocomplete:"username"},null,8,["form"]),H("div",W,[o(d,{type:"submit",class:C(["w-64",[("getGroupColor"in t?t.getGroupColor:e(v))({color:(_=e(n))==null?void 0:_.color})]]),label:"Enregistrer les modifications"},null,8,["class"]),o(d,{variant:"outlined",class:C(["w-64",[("getGroupColor"in t?t.getGroupColor:e(v))({color:(h=e(n))==null?void 0:h.color,outlined:!0})]]),label:"Supprimer mon compte",onClick:G},null,8,["class"])])]}),_:1},8,["initial-values","resolver"])):O("",!0)]),_:1})],64)}}});export{Eo as default};
