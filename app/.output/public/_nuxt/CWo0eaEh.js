import{_ as G}from"./C5WAslpH.js";import{_ as D}from"./IglKwxu6.js";import{u as O}from"./dXRC9N-E.js";import{e as b,X as F,I as N,c as f,o as p,F as C,d as I,a as $,t as V,u as e,n as B,H as T,r as M,s as k,j as R,N as Y,k as v,w as h,b as _,l as w,f as A,Y as U,P as j,K as H}from"./3MoM6jWw.js";import{u as L}from"./zOT457yc.js";import E from"./Cq1Y94P3.js";import K from"./6UrVtcOO.js";import{_ as X}from"./DBOa5hDl.js";import{e as q,h as J,g as Q,a as z,d as W}from"./CPAmBVur.js";import{a as Z}from"./8G3UIhLy.js";import{u as P}from"./3BY5hSSH.js";import{u as ee}from"./_BZxk74s.js";import"./BYXOamw4.js";import"./CLs7nh7g.js";import"./Cum6qu6e.js";import"./DOLxXiKd.js";import"./CXZZkc4T.js";import"./D2ebFzv6.js";import"./DgSP_PYj.js";import"./C7dmviFQ.js";import"./BahfOovt.js";import"./Dbwvbrbp.js";import"./Civ69Tl0.js";import"./Bkfk5F0C.js";import"./ZhWAdK_X.js";import"./wlEwOWea.js";import"./d3CCKqgP.js";import"./jc0MLXVe.js";import"./D8EteHHH.js";import"./BHWw_OYK.js";import"./C3fxjMh-.js";import"./C14PYNz-.js";import"./o9X1dTxE.js";import"./DiGOCqb7.js";import"./5qxzVwgR.js";import"./DUr30_FY.js";import"./DxH5fL30.js";import"./CeA93VAW.js";import"./Cm0gL2Ft.js";import"./CsJ_35S4.js";import"./-6-9faGz.js";import"./ag4DBlC9.js";import"./DgPFgfsL.js";import"./CUF3q24W.js";import"./5Ce8Sj6M.js";const te=b({__name:"ItemYearBudget",props:{month:{},selectedCategory:{},year:{}},setup(y){const o=y,a=F(o,"year"),s=F(o,"selectedCategory"),{month:n}=o,{remainingBudgetInYear:u,getRemainingStyle:c}=O(a),l=N(()=>`${a.value.getFullYear()}-${n[0]}`),t=N(()=>{var r,i,d,g,m;return s.value?((d=(i=(r=u==null?void 0:u.value)==null?void 0:r[l.value])==null?void 0:i.categories.find(x=>{var S;return x.id===((S=s.value)==null?void 0:S.id)}))==null?void 0:d.remaining)??0:((m=(g=u==null?void 0:u.value)==null?void 0:g[l.value])==null?void 0:m.remaining.amount)??0});return(r,i)=>(p(),f(C,null,[I(V(e(n)[1])+" ",1),$("p",{class:B(e(c)(t.value))},V(t.value)+" €",3)],64))}}),oe={key:0,class:"grid gap-6 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 mt-1"},ae=b({__name:"YearBudget",props:{selectedCategory:{},selectedCategoryModifiers:{}},emits:["update:selectedCategory"],setup(y){const o=T(y,"selectedCategory"),a=M(new Date),{group:s}=k(R()),{refetch:n,months:u}=O(a),{categories:c}=L();return Y(a,l=>{l&&n()}),(l,t)=>(p(),v(D,{label:"Budget restant mois par mois"},{header:h(()=>{var r,i,d,g;return[e(c)&&e(c).filter(m=>m.label!=="default").length>0?(p(),v(e(K),{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),editable:"","show-clear":"",options:(r=e(c))==null?void 0:r.filter(m=>m.label!=="default"),"option-label":"label",placeholder:"Choisir une catégorie",class:B(["ml-auto md:w-56",[`bg-${(i=o.value)==null?void 0:i.color}-50`,`hover:bg-${(d=o.value)==null?void 0:d.color}-100`]]),"label-class":["capitalize",`text-${(g=o.value)==null?void 0:g.color}-600`]},null,8,["modelValue","options","class","label-class"])):w("",!0)]}),default:h(()=>[_(e(E),{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),view:"year","date-format":"yy",class:"w-64 mx-auto mt-3","input-class":"text-center"},null,8,["modelValue"]),e(s)?(p(),f("section",oe,[(p(!0),f(C,null,A(Object.entries(e(u)),(r,i)=>(p(),f("div",{key:i,class:"item"},[_(te,{month:r,year:a.value,"selected-category":o.value},null,8,["month","year","selected-category"])]))),128))])):w("",!0)]),_:1}))}}),re=b({__name:"DayBudget",props:{date:{},expensesInDay:{},color:{}},setup(y){return(o,a)=>(p(),f("p",{class:B(o.expensesInDay&&o.expensesInDay.length>0&&e(Z)({color:o.color,text:700}).text)},V(o.date.day),3))}}),se={class:"flex flex-col gap-10"},le={class:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},ne=b({__name:"MonthBudget",setup(y){const{group:o}=k(R()),a=M(null),s=M(q()),{expensesByMonthAndGroup:n,refetchByMonthAndGroup:u}=P();return Y(s,()=>{u()}),(c,l)=>(p(),v(D,{label:"Les dépenses passés et futurs"},{default:h(()=>[$("div",se,[_(e(E),{modelValue:e(a),"onUpdate:modelValue":l[0]||(l[0]=t=>j(a)?a.value=t:null),inline:"","panel-class":"border-none shadow rounded-xl ",class:"w-full",onMonthChange:l[1]||(l[1]=t=>{s.value=e(Q)(new Date(t.year,t.month-1))}),onYearChange:l[2]||(l[2]=t=>{s.value=e(J)(new Date(t.year,t.month-1))})},U({_:2},[e(n)?{name:"date",fn:h(t=>{var r,i;return[_(re,{date:t.date,"expenses-in-day":(r=e(n))==null?void 0:r[`${t.date.year}/${t.date.day}/${t.date.month}`],color:((i=e(o))==null?void 0:i.color)??"gray"},null,8,["date","expenses-in-day","color"])]}),key:"0"}:void 0]),1032,["modelValue"]),e(o)&&e(a)&&e(n)&&e(n)[e(z)(e(a))]?(p(),v(D,{key:0,label:e(W)(e(a))},{default:h(()=>[$("div",le,[(p(!0),f(C,null,A(e(n)[e(z)(e(a))],t=>{var r;return p(),v(X,{key:t.id,expense:t,"group-id":(r=e(o))==null?void 0:r.id},null,8,["expense","group-id"])}),128))])]),_:1},8,["label"])):w("",!0)])]),_:1}))}}),ue={class:"flex flex-col gap-10"},et=b({__name:"forecast",setup(y){var n,u,c,l,t;const o=H(),{group_id:a}=o.params,{group:s}=k(R());return ee({title:`Récapitulatif du budget du groupe ${(n=s.value)==null?void 0:n.name}`,description:`Consultez le bilan budgétaire du groupe ${(u=s.value)==null?void 0:u.name} : dépenses par catégorie, écarts, soldes et évolution mensuelle.`,ogTitle:`Bilan du budget - ${(c=s.value)==null?void 0:c.name}`,ogDescription:`Analyse complète du budget du groupe ${(l=s.value)==null?void 0:l.name}. Visualisez les totaux, les écarts et la répartition des dépenses pour une meilleure gestion collective.`,image:((t=s.value)==null?void 0:t.picture)??void 0}),(r,i)=>{var x;const d=G,g=ae,m=ne;return p(),f(C,null,[_(d,{label:"Récap budgets",color:(x=e(s))==null?void 0:x.color,to:`/groups/${e(a)}/budget`},null,8,["color","to"]),$("div",ue,[_(g,{group_id:e(a)},null,8,["group_id"]),_(m,{"group-id":e(a)},null,8,["group-id"])])],64)}}});export{et as default};
